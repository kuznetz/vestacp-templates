(function(e){function t(t){for(var r,i,o=t[0],l=t[1],c=t[2],p=0,m=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&m.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(m.length)m.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var l=n[o];0!==a[l]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},s=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"2c2a":function(e,t,n){"use strict";var r=n("3910"),a=n.n(r);a.a},"2f41":function(e,t,n){"use strict";var r=n("cd0f"),a=n.n(r);a.a},3910:function(e,t,n){},"53ab":function(e,t,n){"use strict";var r=n("5de8"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("d3b7"),n("96cf"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.authorized?n("Templates",{on:{logout:e.logout}}):n("Auth",{on:{auth:e.auth}})},s=[],i={token:null,serverHttp:function(e,t){var n,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("serverHttp",e,t),a.next=3,regeneratorRuntime.awrap(fetch(S.address+e,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(t)}));case 3:return n=a.sent,a.next=6,regeneratorRuntime.awrap(n.json());case 6:if(r=a.sent,"string"!==typeof r.code&&(r.code="OK"),"INVALID_TOKEN"!=r.code){a.next=12;break}throw r;case 12:if("OK"==r.code){a.next=14;break}throw r;case 14:return console.log("serverHttp result",e,r),a.abrupt("return",r);case 16:case"end":return a.stop()}}))}},o=i,l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"logreg-forms"}},[n("form",{staticClass:"form-signin",on:{submit:function(t){return t.preventDefault(),e.$emit("auth",{login:e.login,password:e.password})}}},[n("h1",{staticClass:"h3 mb-3 font-weight-normal",staticStyle:{"text-align":"center"}},[e._v(" VestaCP Template Editor")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Login",required:"",autofocus:""},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("button",{staticClass:"btn btn-success btn-block",attrs:{type:"submit"}},[e._v("Sign in")])])])},c=[],u={name:"Auth",data:function(){return{login:"",password:""}}},p=u,m=(n("2c2a"),n("2877")),f=Object(m["a"])(p,l,c,!1,null,null,null),d=f.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("nav",{staticClass:"card",attrs:{id:"sidebar"}},[n("div",{staticClass:"sidebar-header"},[n("span",{staticClass:"h3"},[n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$emit("logout")}}},[e._v("[X]")]),e._v(" VestaCpTpl ")])]),n("div",{staticClass:"list-group"},e._l(e.templates,(function(t){return n("a",{key:t.filename,staticClass:"list-group-item list-group-item-action",class:{active:e.curTemplateId==t.filename,"font-weight-bold":""==t.filename},attrs:{href:"#"},on:{click:function(n){n.preventDefault(),e.curTemplateId=t.filename}}},[e._v(" "+e._s(t.filename?t.filename:"New Template")+" ")])})),0)]),n("div",{attrs:{id:"content"}},[e.curTemplate?n("template-editor",{attrs:{template:e.curTemplate},on:{reload:e.reload}}):e._e()],1)])},v=[],g=(n("7db0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newFilename,expression:"newFilename"}],staticClass:"form-control form-control-lg",staticStyle:{"margin-bottom":"5px"},attrs:{type:"text",placeholder:"Template name"},domProps:{value:e.newFilename},on:{input:function(t){t.target.composing||(e.newFilename=t.target.value)}}}),n("div",[n("ul",{staticClass:"nav nav-tabs"},[n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:"http"==e.curView},attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.curView="http"}}},[e._v("http")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:"https"==e.curView},attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.curView="https"}}},[e._v("https")])])])]),"http"==e.curView?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.template.http,expression:"template.http"}],staticClass:"form-control",domProps:{value:e.template.http},on:{input:function(t){t.target.composing||e.$set(e.template,"http",t.target.value)}}}):e._e(),"https"==e.curView?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.template.https,expression:"template.https"}],staticClass:"form-control",domProps:{value:e.template.https},on:{input:function(t){t.target.composing||e.$set(e.template,"https",t.target.value)}}}):e._e(),n("div",{staticStyle:{"text-align":"center","margin-top":"5px"}},[n("button",{staticClass:"btn btn-danger btn-small",on:{click:e.del}},[e._v("Delete")]),n("button",{staticClass:"btn btn-primary btn-small",staticStyle:{"margin-left":"5px"},on:{click:e.save}},[e._v("Save")]),n("button",{staticClass:"btn btn-primary btn-small",staticStyle:{"margin-left":"5px"},on:{click:e.clone}},[e._v("Clone")])])])}),w=[],b={name:"TemplateEditor",components:{},props:{template:Object},data:function(){return{curView:"http",newFilename:""}},computed:{},watch:{template:function(){this.refresh()}},mounted:function(){this.refresh()},methods:{refresh:function(){this.newFilename=this.template.filename},del:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:if(confirm("Delete "+this.template.filename+"?")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,regeneratorRuntime.awrap(o.serverHttp("/api/delete",{token:o.token,filename:this.template.filename}));case 4:this.$emit("reload","");case 5:case"end":return e.stop()}}),null,this)},clone:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(o.serverHttp("/api/save",{token:o.token,oldFilename:"",newFilename:this.newFilename,http:this.template.http,https:this.template.https}));case 2:this.$emit("reload",this.newFilename);case 3:case"end":return e.stop()}}),null,this)},save:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(o.serverHttp("/api/save",{token:o.token,oldFilename:this.template.filename,newFilename:this.newFilename,http:this.template.http,https:this.template.https}));case 2:this.$emit("reload",this.newFilename);case 3:case"end":return e.stop()}}),null,this)}}},x=b,y=(n("2f41"),Object(m["a"])(x,g,w,!1,null,null,null)),_=y.exports,k={name:"Templates",components:{TemplateEditor:_},data:function(){return{curTemplateId:"",templates:[]}},mounted:function(){this.load()},computed:{curTemplate:function(){var e=this;return this.templates.find((function(t){return t.filename==e.curTemplateId}))}},methods:{reload:function(e){this.curTemplateId=e,this.load()},load:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(o.serverHttp("/api/list",{token:o.token}));case 2:e=t.sent,e.templates.unshift({filename:"",http:"",https:""}),this.templates=e.templates;case 5:case"end":return t.stop()}}),null,this)}}},C=k,T=(n("53ab"),Object(m["a"])(C,h,v,!1,null,null,null)),O=T.exports,j={name:"app",components:{Auth:d,Templates:O},data:function(){return{authorized:!1}},methods:{auth:function(e){var t;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,regeneratorRuntime.awrap(o.serverHttp("/api/auth",e));case 3:t=n.sent,o.token=t.token,this.authorized=!0,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),alert(n.t0.error);case 11:case"end":return n.stop()}}),null,this,[[0,8]])},logout:function(){this.authorized=!1}}},R=j,F=Object(m["a"])(R,a,s,!1,null,null,null),P=F.exports;n("4989"),n("ab8b");n.d(t,"config",(function(){return S})),r["a"].config.productionTip=!1;var S=null;function $(){var e,t;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,regeneratorRuntime.awrap(fetch("/config.json"));case 3:return e=n.sent,n.next=6,regeneratorRuntime.awrap(e.json());case 6:return t=n.sent,n.abrupt("return",t);case 10:throw n.prev=10,n.t0=n["catch"](0),"Failed to load config.json";case 13:case"end":return n.stop()}}),null,null,[[0,10]])}function V(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap($());case 2:S=e.sent,console.log("config",S),new r["a"]({render:function(e){return e(P)}}).$mount("#app");case 5:case"end":return e.stop()}}))}V()},"5de8":function(e,t,n){},cd0f:function(e,t,n){}});
//# sourceMappingURL=app.e96183af.js.map